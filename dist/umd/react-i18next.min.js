!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],t):t((e=e||self).ReactI18next={},e.React)}(this,function(e,t){"use strict";var n="default"in t?t.default:t;function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){r(e,t,n[t])})}return e}function i(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var c={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,menuitem:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},s=/([\w-]+)|=|(['"])([.\s\S]*?)\2/g,l=/(?:<!--[\S\s]*?-->|<(?:"[^"]*"['"]*|'[^']*'['"]*|[^'">])+>)/g,u=Object.create?Object.create(null):{};function f(e,t,n,r,o){var i=t.indexOf("<",r),a=t.slice(r,-1===i?void 0:i);/^\s*$/.test(a)&&(a=" "),(!o&&i>-1&&n+e.length>=0||" "!==a)&&e.push({type:"text",content:a})}function p(e,t){switch(t.type){case"text":return e+t.content;case"tag":return e+="<"+t.name+(t.attrs?function(e){var t=[];for(var n in e)t.push(n+'="'+e[n]+'"');return t.length?" "+t.join(" "):""}(t.attrs):"")+(t.voidElement?"/>":">"),t.voidElement?e:e+t.children.reduce(p,"")+"</"+t.name+">"}}var d={parse:function(e,t){t||(t={}),t.components||(t.components=u);var n,r=[],o=-1,i=[],a={},p=!1;return e.replace(l,function(l,u){if(p){if(l!=="</"+n.name+">")return;p=!1}var d,g="/"!==l.charAt(1),h=0===l.indexOf("\x3c!--"),m=u+l.length,y=e.charAt(m);g&&!h&&(o++,"tag"===(n=function(e){var t,n=0,r=!0,o={type:"tag",name:"",voidElement:!1,attrs:{},children:[]};return e.replace(s,function(i){if("="===i)return r=!0,void n++;r?0===n?((c[i]||"/"===e.charAt(e.length-2))&&(o.voidElement=!0),o.name=i):(o.attrs[t]=i.replace(/^['"]|['"]$/g,""),t=void 0):(t&&(o.attrs[t]=t),t=i),n++,r=!1}),o}(l)).type&&t.components[n.name]&&(n.type="component",p=!0),n.voidElement||p||!y||"<"===y||f(n.children,e,o,m,t.ignoreWhitespace),a[n.tagName]=n,0===o&&r.push(n),(d=i[o-1])&&d.children.push(n),i[o]=n),(h||!g||n.voidElement)&&(h||o--,!p&&"<"!==y&&y&&f(d=-1===o?r:i[o].children,e,o,m,t.ignoreWhitespace))}),!r.length&&e.length&&f(r,e,0,0,t.ignoreWhitespace),r},stringify:function(e){return e.reduce(function(e,t){return e+p("",t)},"")}};let g,h,m={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",useSuspense:!0};const y=n.createContext();function b(){return h}function v(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};m=o({},m,e)}function O(){return m}class j{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(e=>{this.usedNamespaces[e]||(this.usedNamespaces[e]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}function E(e){g=e}function x(){return g}const S={type:"3rdParty",init(e){v(e.options.react),E(e)}};function w(e){return t=>new Promise(n=>{const r=I();e.getInitialProps?e.getInitialProps(t).then(e=>{n(o({},e,r))}):n(r)})}function I(){const e=x(),t=e.reportNamespaces?e.reportNamespaces.getUsedNamespaces():[],n={},r={};return e.languages.forEach(n=>{r[n]={},t.forEach(t=>{r[n][t]=e.getResourceBundle(n,t)||{}})}),n.initialI18nStore=r,n.initialLanguage=e.language,n}function N(){if(console&&console.warn){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];"string"==typeof t[0]&&(t[0]="react-i18next:: ".concat(t[0])),console.warn.apply(console,t)}}const k={};function P(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];"string"==typeof t[0]&&k[t[0]]||("string"==typeof t[0]&&(k[t[0]]=new Date),N(...t))}function A(e,t,n){e.loadNamespaces(t,()=>{if(e.isInitialized)n();else{const t=()=>{setImmediate(()=>{e.off("initialized",t)}),n()};e.on("initialized",t)}})}function R(e){return e&&(e.children||e.props&&e.props.children)}function T(e){return e&&e.children?e.children:e.props&&e.props.children}function z(e,t,r){if(""===t)return[];if(!e)return[t];const i={};!function e(t){"[object Array]"!==Object.prototype.toString.call(t)&&(t=[t]),t.forEach(t=>{"string"!=typeof t&&(R(t)?e(T(t)):"object"!=typeof t||n.isValidElement(t)||Object.assign(i,t))})}(e),t=r.services.interpolator.interpolate(t,i,r.language);const a=function e(t,r){return"[object Array]"!==Object.prototype.toString.call(t)&&(t=[t]),"[object Array]"!==Object.prototype.toString.call(r)&&(r=[r]),r.reduce((r,i,a)=>{if("tag"===i.type){const c=t[parseInt(i.name,10)]||{},s=n.isValidElement(c);if("string"==typeof c)r.push(c);else if(R(c)){const t=e(T(c),i.children);c.dummy&&(c.children=t),r.push(n.cloneElement(c,o({},c.props,{key:a}),t))}else if("object"!=typeof c||s)r.push(c);else{const e=i.children[0]?i.children[0].content:null;e&&r.push(e)}}else"text"===i.type&&r.push(i.content);return r},[])}([{dummy:!0,children:e}],d.parse("<0>".concat(t,"</0>")));return T(a[0])}function C(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=n.i18n,i=(b()?t.useContext(y):{}).i18n,c=r||i||x();if(c&&!c.reportNamespaces&&(c.reportNamespaces=new j),!c){P("You will need pass in an i18next instance by using i18nextReactModule");const e=[e=>e,{},!0];return e.t=(e=>e),e.i18n={},e.ready=!0,e}const s=o({},O(),c.options.react);let l=e||c.options&&c.options.defaultNS;l="string"==typeof l?[l]:l||["translation"],c.reportNamespaces.addUsedNamespaces&&c.reportNamespaces.addUsedNamespaces(l);const u=(c.isInitialized||c.initializedStoreOnce)&&l.every(e=>(function(e,t){if(!t.languages||!t.languages.length)return P("i18n.languages were undefined or empty",t.languages),!0;const n=t.languages[0],r=!!t.options&&t.options.fallbackLng,o=t.languages[t.languages.length-1];if("cimode"===n.toLowerCase())return!0;const i=(e,n)=>{const r=t.services.backendConnector.state["".concat(e,"|").concat(n)];return-1===r||2===r};return!!t.hasResourceBundle(n,e)||!t.services.backendConnector.backend||!(!i(n,e)||r&&!i(o,e))})(e,c)),f=a(t.useState({t:c.getFixedT(null,l[0])}),2),p=f[0],d=f[1];function g(){d({t:c.getFixedT(null,l[0])})}t.useEffect(()=>{const e=s.bindI18n,t=s.bindI18nStore;return e&&c&&c.on(e,g),t&&c&&c.store.on(t,g),()=>{e&&c&&e.split(" ").forEach(e=>c.off(e,g)),t&&c&&t.split(" ").forEach(e=>c.store.off(e,g))}});const h=[p.t,c,u];if(h.t=p.t,h.i18n=c,h.ready=u,u)return h;const m=n.useSuspense,v=void 0===m?s.useSuspense:m;if(!u&&!v)return A(c,l,()=>{g()}),h;throw new Promise(e=>{A(c,l,()=>{g(),e()})})}function L(e,n){const r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).i18n,o=(b()?t.useContext(y):{}).i18n,i=r||o||x();e&&!i.initializedStoreOnce&&(i.services.resourceStore.data=e,i.initializedStoreOnce=!0),n&&!i.initializedLanguageOnce&&(i.changeLanguage(n),i.initializedLanguageOnce=!0)}e.Trans=function(e){let r=e.children,a=e.count,c=e.parent,s=e.i18nKey,l=e.tOptions,u=e.values,f=e.defaults,p=e.components,d=e.ns,g=e.i18n,h=e.t,m=i(e,["children","count","parent","i18nKey","tOptions","values","defaults","components","ns","i18n","t"]);const v=(b()?t.useContext(y):{}).i18n,O=g||v||x();if(!O)return P("You will need pass in an i18next instance by using i18nextReactModule"),r;const j=h||O.t.bind(O),E=O.options&&O.options.react||{},S=void 0!==c?c:E.defaultTransParent;let w=p||r;u&&(w=w?w instanceof Array?w.slice(0):[w]:[],Object.keys(u).forEach(e=>{const t=u[e];if(n.isValidElement(t)){const r=w.length,i=n.cloneElement(t,o({},t.props,{key:r}),t.children);w.push(i),u[e]="<".concat(r,"></").concat(r,">")}}));const I=f||function e(t,r,i){return r?("[object Array]"!==Object.prototype.toString.call(r)&&(r=[r]),r.forEach((r,i)=>{const a="".concat(i);if("string"==typeof r)t="".concat(t).concat(r);else if(R(r))t="".concat(t,"<").concat(a,">").concat(e("",T(r),i+1),"</").concat(a,">");else if(n.isValidElement(r))t="".concat(t,"<").concat(a,"></").concat(a,">");else if("object"==typeof r){const e=o({},r),n=e.format;delete e.format;const i=Object.keys(e);n&&1===i.length?t="".concat(t,"{{").concat(i[0],", ").concat(n,"}}"):1===i.length?t="".concat(t,"{{").concat(i[0],"}}"):N("react-i18next: the passed in object contained more than one variable - the object should look like {{ value, format }} where format is optional.",r)}else N("Trans: the passed in value is invalid - seems you passed in a variable like {number} - please pass in variables for interpolation as full objects like {{number}}.",r)}),t):""}("",r)||E.transEmptyNodeValue,k=E.hashTransKey,A=s||(k?k(I):I),C=A?j(A,o({},l,u,u?{}:{interpolation:{prefix:"#$?",suffix:"?$#"}},{defaultValue:I,count:a,ns:d})):I;return S?n.createElement(S,m,z(w,C,O)):z(w,C,O)},e.useTranslation=C,e.withTranslation=function(e){return function(t){return function(r){const i=a(C(e,r),3),c=i[0],s=i[1],l=i[2];return n.createElement(t,o({},r,{t:c,i18n:s,tReady:l}))}}},e.Translation=function(e){const t=e.ns,n=e.children,r=a(C(t,i(e,["ns","children"])),3),o=r[0],c=r[1],s=r[2];return n(o,{i18n:c,lng:c.language},s)},e.I18nextProvider=function(e){let t=e.i18n,r=e.children;return h=!0,n.createElement(y.Provider,{value:{i18n:t}},r)},e.withSSR=function(){return function(e){function t(t){let r=t.initialI18nStore,a=t.initialLanguage,c=i(t,["initialI18nStore","initialLanguage"]);return L(r,a),n.createElement(e,o({},c))}return t.getInitialProps=w(e),t}},e.useSSR=L,e.initReactI18next=S,e.setDefaults=v,e.getDefaults=O,e.setI18n=E,e.getI18n=x,e.composeInitialProps=w,e.getInitialProps=I,Object.defineProperty(e,"__esModule",{value:!0})});
